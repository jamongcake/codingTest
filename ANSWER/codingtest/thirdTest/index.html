<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        .container{width:800px; height:640px; background-color:#eee;margin:0 auto;}
		.container > div:first-child{height:200px;background-color:yellow}
		.container > div:last-child{height:440px;padding:0px 30px;background-color:green}
    </style>
</head>
<body>
    <div class="container" id="container">
		<div>11</div>
		<div id="graph">
			<!--
			<svg version="1.1" baseProfile="full" 
			 width="740" height="440" xmlns="http://www.w3.org/2000/svg">
			 
			<rect width="100%" height="100%" fill="white" />
			
			<circle cx="470" cy="220" r="80" fill="blue" />
			<path d="M10 10 H50 V50 H10 z" fill="black" />
			<path d="M10 60 L60 60, 60 110, 10 110 z fill="black" />
			<path d="M10 120 h50 v50 h-50 z " fill="#eee" />
			-->
			<!--path d="M10 250
					 A50 50 0 0 1 60 300
					 L10 300
					 z" fill="black" /-->
			<!--
			<path d="M10 300
					 a150 150 0 0 1 150 150
					 L10 450 z"
				  fill="black" />
			<path d="M80 80 
				   A 45 45, 0, 0, 0, 125 125 
				   L 125 80 Z" fill="green"/>
			<path d="M230 80
				  A 45 45, 0, 1, 0, 275 125
				  L 275 80 Z" fill="red"/>
			<path d="M80 80
				  A 45 45, 0, 1, 1, 125 125
				  L 125 80 Z" fill="blue"/>
			-->
		</svg></div>
    </div>
</body>
<script type="text/javascript" language="javascript" charset="utf-8" src="surveyData.js"></script>
<script type="text/javascript" language="javascript" charset="utf-8" src="JsData.js"></script>
<script>

	
	
	
	
	
	// ====================================================================================================
	console.log();
	// surveyData는 각 항목마다 체크 알고리즘이 다르므로 런타임에 넣도록 한다.
	let info = new JsData(surveyData, surveyActionData);
	
	// 체크알고리즘
	let genderChecker = (oneData, oneRule) => {return oneData.gender === oneRule ? oneRule : false;}
	let ageChecker = (oneData, oneRule) => {let age = ~~(oneData.age/10)*10; return oneRule.indexOf(age) > -1 ? age : false;}
	let answerChecker = (oneData, oneRule) => {return oneData.answer[oneRule]};
	
	// 체크 알고리즘을 추가한다.
	info.addCheckRule(genderChecker);
	info.addCheckRule(answerChecker);
	info.addCheckRule(ageChecker);
	
	// 실제 동작 [gender, answer, age]
	console.time('check');
	//let resultData = info.getData(["male", 1, [20, 30,40, 50]]);
	let resultData = info.getData(["male", 1, [20]]);
	console.timeEnd('check');
	
</script>
</html>